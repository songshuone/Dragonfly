<!DOCTYPE html>
<html lang="en" class="js csstransforms3d">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="generator" content="Hugo 0.47" />
    <meta name="description" content="DragonFly Documentation">
<meta name="author" content="Team Dragonfly">

    <link rel="shortcut icon" href="/images/favicon.png" type="image/x-icon" />
<link rel="icon" href="/images/favicon.png" type="image/x-icon" />
    <title>FAQ :: DragonFly Documentation</title>

    
    <link href="/css/nucleus.css?1544157082" rel="stylesheet">
    <link href="/css/fontawesome-all.min.css?1544157082" rel="stylesheet">
    <link href="/css/hybrid.css?1544157082" rel="stylesheet">
    <link href="/css/featherlight.min.css?1544157082" rel="stylesheet">
    <link href="/css/perfect-scrollbar.min.css?1544157082" rel="stylesheet">
    <link href="/css/auto-complete.css?1544157082" rel="stylesheet">
    <link href="/css/theme.css?1544157082" rel="stylesheet">
    <link href="/css/hugo-theme.css?1544157082" rel="stylesheet">
    
      <link href="/css/theme-dragonfly.css?1544157082" rel="stylesheet">
    

    <script src="/js/jquery-2.x.min.js?1544157082"></script>

    <style type="text/css">
      :root #header + #content > #left > #rlblock_left{
          display:none !important;
      }
      
    </style>
    
  </head>
  <body class="" data-url="/faq/">
    <nav id="sidebar" class="showVisitedLinks">



  <div id="header-wrapper">
    <div id="header">
      <img src="https://raw.githubusercontent.com/aliware-os/dragonfly-test/gh-pages/images/logo.png"  alt="Dragonfly Logo" />
    </div>
    
        <div class="searchbox">
    <label for="search-by"><i class="fas fa-search"></i></label>
    <input data-search-input id="search-by" type="text" placeholder="Search...">
    <span data-search-clear=""><i class="fas fa-close"></i></span>
</div>

<script type="text/javascript" src="/js/lunr.min.js?1544157082"></script>
<script type="text/javascript" src="/js/auto-complete.js?1544157082"></script>
<script type="text/javascript">
    
        var baseurl = "https:\/\/d7y.io";
    
</script>
<script type="text/javascript" src="/js/search.js?1544157082"></script>

    
  </div>

    <div class="highlightable">
    <ul class="topics">

        
          
          


 
  
    
    <li data-nav-id="/onboarding/" title="Before Starting" class="dd-item 
        
        
        
        ">
      <a href="/onboarding/">
          <b>0. </b>Before Starting
          
            <i class="fas read-icon"></i>
          
      </a>
      
              
    </li>
  
 

          
          


 
  
    
    <li data-nav-id="/overview/" title="Overview" class="dd-item 
        
        
        
        ">
      <a href="/overview/">
          <b>1. </b>Overview
          
            <i class="fas read-icon"></i>
          
      </a>
      
      
        <ul>
          
          
          
          
        
          
            
            


 
  
    
      <li data-nav-id="/overview/what_is_dragonfly/" title="What Is Dragonfly?" class="dd-item ">
        <a href="/overview/what_is_dragonfly/">
        What Is Dragonfly?
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/overview/terminology/" title="Terminology" class="dd-item ">
        <a href="/overview/terminology/">
        Terminology
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
        
        </ul>
              
    </li>
  
 

          
          


 
  
    
    <li data-nav-id="/quick_start/" title="Quick Start" class="dd-item 
        
        
        
        ">
      <a href="/quick_start/">
          <b>2. </b>Quick Start
          
            <i class="fas read-icon"></i>
          
      </a>
      
              
    </li>
  
 

          
          


 
  
    
    <li data-nav-id="/user_guide/" title="User Guide" class="dd-item 
        
        
        
        ">
      <a href="/user_guide/">
          <b>3. </b>User Guide
          
            <i class="fas read-icon"></i>
          
      </a>
      
      
        <ul>
          
          
          
          
        
          
            
            


 
  
    
      <li data-nav-id="/user_guide/install_server/" title="Installing Server" class="dd-item ">
        <a href="/user_guide/install_server/">
        Installing Server
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/user_guide/install_client/" title="Installing Client" class="dd-item ">
        <a href="/user_guide/install_client/">
        Installing Client
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/user_guide/download_files/" title="Downloading Files" class="dd-item ">
        <a href="/user_guide/download_files/">
        Downloading Files
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/user_guide/supernode_configuration/" title="Supernode Configuration" class="dd-item ">
        <a href="/user_guide/supernode_configuration/">
        Supernode Configuration
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
        
        </ul>
              
    </li>
  
 

          
          


 
  
    
    <li data-nav-id="/cli_reference/" title="CLI Reference" class="dd-item 
        
        
        
        ">
      <a href="/cli_reference/">
          <b>4. </b>CLI Reference
          
            <i class="fas read-icon"></i>
          
      </a>
      
      
        <ul>
          
          
          
          
        
          
            
            


 
  
    
      <li data-nav-id="/cli_reference/dfdaemon/" title="dfdaemon" class="dd-item ">
        <a href="/cli_reference/dfdaemon/">
        dfdaemon
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/cli_reference/dfget/" title="dfget" class="dd-item ">
        <a href="/cli_reference/dfget/">
        dfget
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
        
        </ul>
              
    </li>
  
 

          
          


 
  
    
    <li data-nav-id="/api_reference/" title="APIs Provided by Supernode" class="dd-item 
        
        
        
        ">
      <a href="/api_reference/">
          <b>5. </b>API Reference
          
            <i class="fas read-icon"></i>
          
      </a>
      
              
    </li>
  
 

          
          


 
  
    
    <li data-nav-id="/faq/" title="FAQ" class="dd-item 
        parent
        active
        
        ">
      <a href="/faq/">
          <b>6. </b>FAQ
          
            <i class="fas read-icon"></i>
          
      </a>
      
              
    </li>
  
 

          
         
    </ul>

    
    
      <section id="shortcuts">
        <h3>More</h3>
        <ul>
          
              <li> 
                  <a class="padding" href="https://d7y.io"><i class='fab fa-fw fa-github'></i> View on Github</a>
              </li>
          
              <li> 
                  <a class="padding" href="https://d7y.io/roadmap"><i class='fas fa-fw fa-map-signs'></i> Roadmap</a>
              </li>
          
        </ul>
      </section>
    

    
    <section id="prefooter">
      <hr/>
      <ul>
      
      
      
        <li><a class="padding" href="#" data-clear-history-toggle=""><i class="fas fa-history fa-fw"></i> Clear History</a></li>
      
      </ul>
    </section>
    
    <section id="footer">
      <p>Built with <a href="https://github.com/matcornic/hugo-theme-learn"><i class="fas fa-heart"></i></a> from <a href="http://getgrav.org">Grav</a> and <a href="http://gohugo.io/">Hugo</a></p>

    </section>
  </div>
</nav>





        <section id="body">
        <div id="overlay"></div>
        <div class="padding highlightable">
              
              <div>
                <div id="top-bar">
                
                  
                  
                  
                  <div id="top-github-link">
                    <a class="github-link" title='Edit this page' href="https://github.com/dragonflyoss/Dragonfly/edit/master/docs/faq/_index.md" target="blank">
                      <i class="fas fa-code-branch"></i>
                      <span id="top-github-link-text">Edit this page</span>
                    </a>
                  </div>
                  
                
                
                <div id="breadcrumbs" itemscope="" itemtype="http://data-vocabulary.org/Breadcrumb">
                    <span id="sidebar-toggle-span">
                        <a href="#" id="sidebar-toggle" data-sidebar-toggle="">
                          <i class="fas fa-bars"></i>
                        </a>
                    </span>
                  
                  <span id="toc-menu"><i class="fas fa-list-alt"></i></span>
                  
                  <span class="links">
                 
                 
                    
          
          
            
            
          
          
            <a href='/'>Dragonfly</a> > FAQ
          
         
          
        
                 
                  </span>
                </div>
                
                    <div class="progress">
    <div class="wrapper">
<nav id="TableOfContents">
<ul>
<li>
<ul>
<li><a href="#how-can-i-pull-images-with-dragonfly">How can I pull images with Dragonfly?</a></li>
<li><a href="#how-can-i-download-files-with-dragonfly">How can I download files with Dragonfly?</a></li>
<li><a href="#what-is-a-supernode">What is a supernode?</a></li>
<li><a href="#what-is-dfget">What is dfget?</a></li>
<li><a href="#what-is-dfdaemon">What is dfdaemon?</a></li>
<li><a href="#where-is-the-installation-directory-of-dragonfly-client-dfget">Where is the installation directory of Dragonfly client dfget?</a></li>
<li><a href="#where-is-the-log-directory-of-dragonfly-client-dfget">Where is the log directory of Dragonfly client dfget?</a></li>
<li><a href="#where-is-the-data-directory-of-dragonfly-client-dfget">Where is the data directory of Dragonfly client dfget?</a></li>
<li><a href="#where-is-the-meta-directory-of-dragonfly-client-dfget">Where is the meta directory of Dragonfly client dfget?</a></li>
<li><a href="#how-to-check-the-version-of-dragonfly-client-dfget">How to check the version of Dragonfly client dfget?</a></li>
<li><a href="#why-is-the-dfget-process-still-there-after-the-download-is-complete">Why is the dfget process still there after the download is complete?</a></li>
<li><a href="#how-to-clean-up-the-data-directory-of-dragonfly">How to clean up the data directory of Dragonfly?</a></li>
</ul></li>
</ul>
</nav>
    </div>
</div>

                
              </div>
            </div>
            

        
        <div id="body-inner">
          
            <h1>FAQ</h1>
          

        


<p>Find the answers to the frequently asked questions.
</p>

<h2 id="how-can-i-pull-images-with-dragonfly">How can I pull images with Dragonfly?</h2>

<p>See <a href="https://d7y.io/quick_start/#pulling-an-image-with-dragonfly">Pulling an Image with Dragonfly</a>.</p>

<h2 id="how-can-i-download-files-with-dragonfly">How can I download files with Dragonfly?</h2>

<p>See <a href="https://d7y.io/quick_start/#downloading-a-file-with-dragonfly">Downloading a File with Dragonfly</a>.</p>

<h2 id="what-is-a-supernode">What is a supernode?</h2>

<p>A supernode is a long-time process that plays the following roles:</p>

<ul>
<li>A tracker and scheduler in the P2P network that chooses appropriate downloading net-path for each peer.</li>
<li>A CDN server that caches downloaded data from source to avoid downloading same files repeatedly.</li>
</ul>

<h2 id="what-is-dfget">What is dfget?</h2>

<p>Dfget is the Dragonfly client used for downloading files. It&rsquo;s similar to wget.</p>

<p>Meanwhile, it also plays the role of a peer, which can transfer data between each other in the P2P network.</p>

<h2 id="what-is-dfdaemon">What is dfdaemon?</h2>

<p>Dfdaemon is only used for pulling images. It establishes a proxy between dockerd/pouchd and registry.</p>

<p>Dfdaemon filters out layer fetching requests from all requests sent by dockerd/pouchd when pulling images, then uses dfget to download these layers.</p>

<h2 id="where-is-the-installation-directory-of-dragonfly-client-dfget">Where is the installation directory of Dragonfly client dfget?</h2>

<p>Normally, there are two installation directories:</p>

<ul>
<li>Dragonfly plugin for StarAgent: <code>/home/staragent/plugins/dragonfly/dfget</code></li>
<li>StarAgent&rsquo;s built-in dfget: <code>/home/staragent/bin/dfget</code></li>
</ul>

<p>The Dragonfly plugin is used by default. If the Dragonfly plugin is not installed, then the StarAgent&rsquo;s build-in dfget is used.</p>

<h2 id="where-is-the-log-directory-of-dragonfly-client-dfget">Where is the log directory of Dragonfly client dfget?</h2>

<p>The log directory is <code>$HOME/.small-dragonfly/logs/dfclient.log</code>.</p>

<h2 id="where-is-the-data-directory-of-dragonfly-client-dfget">Where is the data directory of Dragonfly client dfget?</h2>

<p>The data directory is <code>$HOME/.small-dragonfly/data</code>.</p>

<p>Each account has its own data directory. A P2P downloading job generates two data files under this directory:</p>

<ul>
<li>A temporary downloading file for the target file, with the name <code>targetFileName-sign</code>. This file is moved to the target directory after the download is complete.</li>
<li>A copy of the temporary downloading file for uploading, with the name <code>targetFileName-sign.service</code>. If no downloading jobs are downloading this file from this node, then it gets cleaned after three minutes. Before the process is completed normally, any file lasting longer than 60 minutes will be purged.</li>
</ul>

<h2 id="where-is-the-meta-directory-of-dragonfly-client-dfget">Where is the meta directory of Dragonfly client dfget?</h2>

<p>The meta directory is <code>$HOME/.small-dragonfly/meta</code>.</p>

<p>This directory caches the address list of the local node (IP, hostname, IDC, security domain, and so on), managing nodes, and supernodes.</p>

<p>When started for the first time, the Dragonfly client will access the managing node. The managing node will retrieve the security domains, IDC, geo-location, and more information of this node by querying armory, and assign the most suitable supernode. The managing node also distributes the address lists of all other supernodes. dfget stores the above information in the meta directory on the local drive. When the next job is started, dfget reads the meta information from this directory, avoiding accessing the managing node repeatedly.</p>

<p>dfget always finds the most suitable assigned node to register. If fails, it requests other supernodes in order. If all fail, then it requests the managing node once again, updates the meta information, and repeats the above steps. If still fails, then the job fails.</p>

<p><strong>Tip</strong>: If the dfclient.log suggests that the supernode registration fails all the time, try delete all files from the meta directory and try again.</p>

<h2 id="how-to-check-the-version-of-dragonfly-client-dfget">How to check the version of Dragonfly client dfget?</h2>

<p>If you have installed the Dragonfly client, run this command:</p>

<pre><code class="language-bash">dfget -v
</code></pre>

<h2 id="why-is-the-dfget-process-still-there-after-the-download-is-complete">Why is the dfget process still there after the download is complete?</h2>

<p>Because Dragonfly adopts a P2P downloading approach, dfget provides uploading services in addition to downloading services. If there are no new jobs within five minutes, the dfget process will be terminated automatically.</p>

<h2 id="how-to-clean-up-the-data-directory-of-dragonfly">How to clean up the data directory of Dragonfly?</h2>

<p>Normally, Dragonfly automatically cleans up files which are not accessed in three minutes from the uploading file list, and the residual files that live longer than one hour from the data directory.</p>

<p>Follow these steps to clean up the data directory manually:</p>

<ol>
<li>Identify the account to which the residual files belong.</li>
<li>Check if there is any running dfget process started by other accounts.</li>
<li>If there is such a process, then terminate the process, and start a dfget process with the account identified at Step 1. This process will automatically clean up the residual files from the data directory.</li>
</ol>

<footer class=" footline" >
	
</footer>

        
        </div> 
        

      </div>

    <div id="navigation">
        
        
        
        
            
            
                
                    
                    
                
                

                    
                    
                        
                    
                    

                    
                        
            
            
                
                    
                        
                        
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
        
        


	 
	 
		
			<a class="nav nav-prev" href="/api_reference/" title="APIs Provided by Supernode"> <i class="fa fa-chevron-left"></i></a>
		
		
			<a class="nav nav-next" href="/onboarding/" title="Before Starting" style="margin-right: 0px;"><i class="fa fa-chevron-right"></i></a>
		
	
    </div>

    </section>
    
    <div style="left: -1000px; overflow: scroll; position: absolute; top: -1000px; border: none; box-sizing: content-box; height: 200px; margin: 0px; padding: 0px; width: 200px;">
      <div style="border: none; box-sizing: content-box; height: 200px; margin: 0px; padding: 0px; width: 200px;"></div>
    </div>
    <script src="/js/clipboard.min.js?1544157082"></script>
    <script src="/js/perfect-scrollbar.min.js?1544157082"></script>
    <script src="/js/perfect-scrollbar.jquery.min.js?1544157082"></script>
    <script src="/js/jquery.sticky.js?1544157082"></script>
    <script src="/js/featherlight.min.js?1544157082"></script>
    <script src="/js/html5shiv-printshiv.min.js?1544157082"></script>
    <script src="/js/highlight.pack.js?1544157082"></script>
    <script>hljs.initHighlightingOnLoad();</script>
    <script src="/js/modernizr.custom.71422.js?1544157082"></script>
    <script src="/js/learn.js?1544157082"></script>
    <script src="/js/hugo-learn.js?1544157082"></script>

    <link href="/mermaid/mermaid.css?1544157082" type="text/css" rel="stylesheet" />
    <script src="/mermaid/mermaid.js?1544157082"></script>
    <script>
        mermaid.initialize({ startOnLoad: true });
    </script>
    

  </body>
</html>
